# Tutorial

## Hello World

In Cliar, commandline interface is represented with a Python class subclassed from `Cliar`. Cliar turns the class methods into commands and their params into args.

Let's create the simplest CLI that says "Hello World!" when you call "hello" command:

```python
from cliar import Cliar


class Greeter(Cliar):           # Define a regular Python class
    def hello(self):            # and a regular method,
        print('Hello World!')   # which implements the business logic.


if __name__ == '__main__':
    greeter = Greeter()         # Create an instance of the class
    greeter.parse()             # and run its `parse` method.
```

Save this code into `greeter.py` and run it with Python:

```shell
$ python greeter.py hello
Hello World!
```

And here it is: your first CLI created with Cliar! That was easy, wasn't it?

Let's extend `hello` method to shout the greeting if `--shout` flag is passed:

```python
    def hello(self, shout=False):
        greeting = 'Hello World!'

        if shout:
            print(greeting.upper())
        else:
            print(greeting)
```

Try running `greeter.py` with and without the newly defined flag:

```shell
$ python greeter.py hello --shout
HELLO WORLD!
$ python greeter.py hello -s    # Short version works, too!
HELLO WORLD!
$ python greeter.py hello
Hello World!
```

Cliar did a few things for us here:

-   `shout` is an optional param, so it was converted into an optional flag
-   since `shout` default value is `False`, Cliar inferred its type as `bool`, so we can use it as such inside `hello` body
-   not only was `--shout` flag generated from the eponymous `shout` param, but a short version `-s` was also generated


## Hello {user}

Ok, but what if we want our app to be able to greet anyone, not just the world? Just add a positional param to `hello`:

```python
    def hello(self, name, shout=False):
        greeting = f'Hello {name}!'

        if shout:
            print(greeting.upper())
        else:
            print(greeting)
```

Try it:

```shell
$ python greeter.py hello John
Hello John!
$ python greeter.py hello John --shout
HELLO JOHN!
$ python greeter.py hello -s John
HELLO JOHN!
$ python greeter.py hello
usage: greeter.py hello [-h] [-s] name
greeter.py hello: error: the following arguments are required: name
```


## Help Messages

If you run `greeter.py` with `--help` or `-h` flag, you'll see the help message generated by Cliar:

```shell
$ python greeter.py --help
usage: greeter.py [-h] {hello} ...

optional arguments:
  -h, --help  show this help message and exit

commands:
  {hello}     Available commands:
    hello

$ python greeter.py hello --help
usage: greeter.py hello [-h] [-s] name

positional arguments:
  name

optional arguments:
  -h, --help   show this help message and exit
  -s, --shout
```

Although it does show some useful information, it's still quite poor: there's no app or command description or information about `--shout` or `name` arguments.

First, let's add app and command descriptions. Cliar uses class and method docstrings to generate help messages, so just add those:

```python
class Greeter(Cliar):
    '''Greeter app created with in Cliar.'''

    def hello(self, name, shout=False):
        '''Say hello.'''

        greeting = f'Hello {name}!'

        if shout:
            print(greeting.upper())
        else:
            print(greeting)
```

Try calling the help messages now:

```shell
$ python greeter.py -h
usage: greeter.py [-h] {hello} ...

Greeter app created with in Cliar.

optional arguments:
  -h, --help  show this help message and exit

commands:
  {hello}     Available commands:
    hello     Say hello to {name}.

$ python greeter.py hello -h
usage: greeter.py hello [-h] [-s] name

Say hello.

positional arguments:
  name

optional arguments:
  -h, --help   show this help message and exit
  -s, --shout
```

That's much better! Now, let's add descriptions for `--shout` and `name` arguments.


## Argument Descriptions

To add description for arguments, use `set_help` decorator:

```python
from cliar import Cliar, set_help

...

    @set_help({'name': 'The greetee', 'shout': 'Set to shout the greeting'})
    def hello(self, name, shout=False):
        '''Say hello.'''

        greeting = f'Hello {name}!'

        if shout:
            print(greeting.upper())
        else:
            print(greeting)
```

The decorator takes a mapping from param names to help messages.

Call the help message for `hello` command:

```shell
$ python greeter.py hello -h
usage: greeter.py hello [-h] [-s] name

Say hello.

positional arguments:
  name         The greetee

optional arguments:
  -h, --help   show this help message and exit
  -s, --shout  Set to shout the greeting
```


## Metavars

*Metavar* is the placeholder of a positional arg as it appears in the usage message. By default, Cliar uses the param name as its metavar. So, for `name` param the metavar is called `name`:

```shell
$ python greeter.py hello -h
usage: greeter.py hello [-h] [-s] name

Say hello.

positional arguments:
  name         The greetee

optional arguments:
  -h, --help   show this help message and exit
  -s, --shout  Set to shout the greeting
```

Let's change it to `NAME`, just so it's more visible in the line. To do that, use `set_metavars` decorator:

```python
from cliar import Cliar, set_help, set_metavars

...

    @set_metavars({'name': 'NAME'})
    @set_help({'name': 'The greetee', 'shout': 'Set to shout the greeting'})
    def hello(self, name, shout=False):
        '''Say hello.'''

        greeting = f'Hello {name}!'

        if shout:
            print(greeting.upper())
        else:
            print(greeting)
```

The decorator takes a mapping from param names to metavars.

Call the help message for `hello`:

```shell
usage: greeter.py hello [-h] [-s] NAME

Say hello.

positional arguments:
  NAME         The greetee

optional arguments:
  -h, --help   show this help message and exit
  -s, --shout  Set to shout the greeting
```
